2025-02-03 22:43:45.968 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM client AS c)
2025-02-03 22:43:46.082 +01:00 [INF] User profile is available. Using '/Users/yoann/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-02-03 22:43:46.112 +01:00 [INF] Now listening on: http://localhost:5141
2025-02-03 22:43:46.114 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-03 22:43:46.115 +01:00 [INF] Hosting environment: Development
2025-02-03 22:43:46.115 +01:00 [INF] Content root path: /Users/yoann/Workspace/CESI DI 2023/Negosud/backend/backend-negosud
2025-02-03 22:43:47.100 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5141/swagger/index.html - null null
2025-02-03 22:43:47.409 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5141/swagger/index.html - 200 null text/html;charset=utf-8 310.7726ms
2025-02-03 22:43:47.827 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5141/swagger/v1/swagger.json - null null
2025-02-03 22:43:47.940 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5141/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 116.2609ms
2025-02-03 22:43:53.665 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5141/api/Stocks - null null
2025-02-03 22:43:53.686 +01:00 [WRN] Failed to determine the https port for redirect.
2025-02-03 22:43:53.700 +01:00 [WRN] Failed to determine the https port for redirect.
2025-02-03 22:43:53.731 +01:00 [INF] Executing endpoint 'backend_negosud.Controllers.StocksController.GetAllStocks (backend-negosud)'
2025-02-03 22:43:53.742 +01:00 [INF] Route matched with {action = "GetAllStocks", controller = "Stocks"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[backend_negosud.DTOs.StockSummaryDto]]] GetAllStocks() on controller backend_negosud.Controllers.StocksController (backend-negosud).
2025-02-03 22:43:53.821 +01:00 [INF] Executing action method backend_negosud.Controllers.StocksController.GetAllStocks (backend-negosud) - Validation state: "Valid"
2025-02-03 22:43:53.876 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT s.stock_id, s.article_id, s.quantite, s.reapprovisionnement_auto, s.ref_lot, s.seuil_minimum
FROM stock AS s
2025-02-03 22:43:53.919 +01:00 [INF] Executed action method backend_negosud.Controllers.StocksController.GetAllStocks (backend-negosud), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 95.3032ms.
2025-02-03 22:43:53.925 +01:00 [INF] Executing OkObjectResult, writing value of type 'backend_negosud.Models.ResponseDataModel`1[[System.Collections.Generic.List`1[[backend_negosud.DTOs.StockSummaryDto, backend-negosud, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-03 22:43:53.972 +01:00 [INF] Executed action backend_negosud.Controllers.StocksController.GetAllStocks (backend-negosud) in 227.3842ms
2025-02-03 22:43:53.972 +01:00 [INF] Executed endpoint 'backend_negosud.Controllers.StocksController.GetAllStocks (backend-negosud)'
2025-02-03 22:43:53.979 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5141/api/Stocks - 200 null application/json; charset=utf-8 313.5437ms
2025-02-03 22:44:13.949 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5141/api/Stocks/1 - null null
2025-02-03 22:44:13.957 +01:00 [INF] Executing endpoint 'backend_negosud.Controllers.StocksController.GetStockById (backend-negosud)'
2025-02-03 22:44:13.969 +01:00 [INF] Route matched with {action = "GetStockById", controller = "Stocks"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend_negosud.DTOs.StockDetailDto]] GetStockById(Int32) on controller backend_negosud.Controllers.StocksController (backend-negosud).
2025-02-03 22:44:13.994 +01:00 [INF] Executing action method backend_negosud.Controllers.StocksController.GetStockById (backend-negosud) - Validation state: "Valid"
2025-02-03 22:44:14.087 +01:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT s.stock_id, s.article_id, s.quantite, s.reapprovisionnement_auto, s.ref_lot, s.seuil_minimum
FROM stock AS s
WHERE s.stock_id = @__p_0
LIMIT 1
2025-02-03 22:44:14.090 +01:00 [INF] Executed action method backend_negosud.Controllers.StocksController.GetStockById (backend-negosud), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 95.5438ms.
2025-02-03 22:44:14.090 +01:00 [INF] Executing OkObjectResult, writing value of type 'backend_negosud.DTOs.StockDetailDto'.
2025-02-03 22:44:14.097 +01:00 [INF] Executed action backend_negosud.Controllers.StocksController.GetStockById (backend-negosud) in 127.4195ms
2025-02-03 22:44:14.097 +01:00 [INF] Executed endpoint 'backend_negosud.Controllers.StocksController.GetStockById (backend-negosud)'
2025-02-03 22:44:14.097 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5141/api/Stocks/1 - 200 null application/json; charset=utf-8 150.1088ms
2025-02-03 22:45:11.852 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5141/api/Stocks - application/json 118
2025-02-03 22:45:11.854 +01:00 [INF] CORS policy execution successful.
2025-02-03 22:45:11.861 +01:00 [INF] Executing endpoint 'backend_negosud.Controllers.StocksController.CreateStock (backend-negosud)'
2025-02-03 22:45:11.873 +01:00 [INF] Route matched with {action = "CreateStock", controller = "Stocks"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend_negosud.DTOs.StockSummaryDto]] CreateStock(backend_negosud.DTOs.StockInputDto) on controller backend_negosud.Controllers.StocksController (backend-negosud).
2025-02-03 22:45:11.937 +01:00 [INF] Executing action method backend_negosud.Controllers.StocksController.CreateStock (backend-negosud) - Validation state: "Valid"
2025-02-03 22:45:11.946 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.article_id, a.famille_id, a.fournisseur_id, a.libelle, a.prix, a.reference, a.tva_id
FROM article AS a
WHERE a.article_id = @__p_0
LIMIT 1
2025-02-03 22:45:12.066 +01:00 [INF] Executed action backend_negosud.Controllers.StocksController.CreateStock (backend-negosud) in 192.2993ms
2025-02-03 22:45:12.066 +01:00 [INF] Executed endpoint 'backend_negosud.Controllers.StocksController.CreateStock (backend-negosud)'
2025-02-03 22:45:12.068 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO stock (article_id, quantite, reapprovisionnement_auto, ref_lot, seuil_minimum)
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING stock_id;
2025-02-03 22:45:12.081 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at backend_negosud.Controllers.StocksController.CreateStock(StockInputDto createStockDto) in /Users/yoann/Workspace/CESI DI 2023/Negosud/backend/backend-negosud/Controllers/StocksController.cs:line 76
   at lambda_method91(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-02-03 22:45:12.088 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5141/api/Stocks - 500 null text/plain; charset=utf-8 235.9705ms
2025-02-03 22:49:43.278 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5141/api/Stocks - application/json 118
2025-02-03 22:49:43.280 +01:00 [INF] CORS policy execution successful.
2025-02-03 22:49:43.281 +01:00 [INF] Executing endpoint 'backend_negosud.Controllers.StocksController.CreateStock (backend-negosud)'
2025-02-03 22:49:43.283 +01:00 [INF] Route matched with {action = "CreateStock", controller = "Stocks"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend_negosud.DTOs.StockSummaryDto]] CreateStock(backend_negosud.DTOs.StockInputDto) on controller backend_negosud.Controllers.StocksController (backend-negosud).
2025-02-03 22:49:43.291 +01:00 [INF] Executing action method backend_negosud.Controllers.StocksController.CreateStock (backend-negosud) - Validation state: "Valid"
2025-02-03 22:49:43.361 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.article_id, a.famille_id, a.fournisseur_id, a.libelle, a.prix, a.reference, a.tva_id
FROM article AS a
WHERE a.article_id = @__p_0
LIMIT 1
2025-02-03 22:49:43.366 +01:00 [INF] Executed action backend_negosud.Controllers.StocksController.CreateStock (backend-negosud) in 82.5724ms
2025-02-03 22:49:43.366 +01:00 [INF] Executed endpoint 'backend_negosud.Controllers.StocksController.CreateStock (backend-negosud)'
2025-02-03 22:49:43.367 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO stock (article_id, quantite, reapprovisionnement_auto, ref_lot, seuil_minimum)
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING stock_id;
2025-02-03 22:49:43.368 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at backend_negosud.Controllers.StocksController.CreateStock(StockInputDto createStockDto) in /Users/yoann/Workspace/CESI DI 2023/Negosud/backend/backend-negosud/Controllers/StocksController.cs:line 76
   at lambda_method91(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-02-03 22:49:43.373 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5141/api/Stocks - 500 null text/plain; charset=utf-8 94.7463ms
2025-02-03 22:49:45.386 +01:00 [INF] Application is shutting down...
2025-02-03 22:49:48.164 +01:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM client AS c)
2025-02-03 22:49:48.292 +01:00 [INF] User profile is available. Using '/Users/yoann/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-02-03 22:49:48.322 +01:00 [INF] Now listening on: http://localhost:5141
2025-02-03 22:49:48.324 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-03 22:49:48.324 +01:00 [INF] Hosting environment: Development
2025-02-03 22:49:48.324 +01:00 [INF] Content root path: /Users/yoann/Workspace/CESI DI 2023/Negosud/backend/backend-negosud
2025-02-03 22:49:48.689 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5141/swagger/index.html - null null
2025-02-03 22:49:48.791 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5141/swagger/index.html - 200 null text/html;charset=utf-8 103.2013ms
2025-02-03 22:49:49.067 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5141/swagger/v1/swagger.json - null null
2025-02-03 22:49:49.140 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5141/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 73.621ms
2025-02-03 22:50:09.476 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5141/api/Stocks - application/json 115
2025-02-03 22:50:09.493 +01:00 [WRN] Failed to determine the https port for redirect.
2025-02-03 22:50:09.510 +01:00 [INF] CORS policy execution successful.
2025-02-03 22:50:09.511 +01:00 [WRN] Failed to determine the https port for redirect.
2025-02-03 22:50:09.544 +01:00 [INF] Executing endpoint 'backend_negosud.Controllers.StocksController.CreateStock (backend-negosud)'
2025-02-03 22:50:09.559 +01:00 [INF] Route matched with {action = "CreateStock", controller = "Stocks"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend_negosud.DTOs.StockSummaryDto]] CreateStock(backend_negosud.DTOs.StockInputDto) on controller backend_negosud.Controllers.StocksController (backend-negosud).
2025-02-03 22:50:09.733 +01:00 [INF] Executing action method backend_negosud.Controllers.StocksController.CreateStock (backend-negosud) - Validation state: "Valid"
2025-02-03 22:50:09.837 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.article_id, a.famille_id, a.fournisseur_id, a.libelle, a.prix, a.reference, a.tva_id
FROM article AS a
WHERE a.article_id = @__p_0
LIMIT 1
2025-02-03 22:50:09.985 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO stock (article_id, quantite, reapprovisionnement_auto, ref_lot, seuil_minimum)
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING stock_id;
2025-02-03 22:50:09.994 +01:00 [INF] Executed action backend_negosud.Controllers.StocksController.CreateStock (backend-negosud) in 432.4813ms
2025-02-03 22:50:09.995 +01:00 [INF] Executed endpoint 'backend_negosud.Controllers.StocksController.CreateStock (backend-negosud)'
2025-02-03 22:50:10.011 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at backend_negosud.Controllers.StocksController.CreateStock(StockInputDto createStockDto) in /Users/yoann/Workspace/CESI DI 2023/Negosud/backend/backend-negosud/Controllers/StocksController.cs:line 76
   at lambda_method30(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-02-03 22:50:10.022 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5141/api/Stocks - 500 null text/plain; charset=utf-8 545.8797ms
2025-02-03 22:53:33.066 +01:00 [INF] Application is shutting down...
2025-02-03 22:53:37.123 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM client AS c)
2025-02-03 22:53:37.230 +01:00 [INF] User profile is available. Using '/Users/yoann/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-02-03 22:53:37.260 +01:00 [INF] Now listening on: http://localhost:5141
2025-02-03 22:53:37.262 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-03 22:53:37.263 +01:00 [INF] Hosting environment: Development
2025-02-03 22:53:37.263 +01:00 [INF] Content root path: /Users/yoann/Workspace/CESI DI 2023/Negosud/backend/backend-negosud
2025-02-03 22:53:38.025 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5141/swagger/index.html - null null
2025-02-03 22:53:38.175 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5141/swagger/index.html - 200 null text/html;charset=utf-8 151.3269ms
2025-02-03 22:53:38.468 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5141/swagger/v1/swagger.json - null null
2025-02-03 22:53:38.577 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5141/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 109.5015ms
2025-02-03 22:53:52.344 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5141/api/Stocks - application/json 116
2025-02-03 22:53:52.360 +01:00 [WRN] Failed to determine the https port for redirect.
2025-02-03 22:53:52.376 +01:00 [INF] CORS policy execution successful.
2025-02-03 22:53:52.376 +01:00 [WRN] Failed to determine the https port for redirect.
2025-02-03 22:53:52.406 +01:00 [INF] Executing endpoint 'backend_negosud.Controllers.StocksController.CreateStock (backend-negosud)'
2025-02-03 22:53:52.421 +01:00 [INF] Route matched with {action = "CreateStock", controller = "Stocks"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend_negosud.DTOs.StockSummaryDto]] CreateStock(backend_negosud.DTOs.StockInputDto) on controller backend_negosud.Controllers.StocksController (backend-negosud).
2025-02-03 22:53:52.597 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-02-03 22:53:52.624 +01:00 [INF] Executed action backend_negosud.Controllers.StocksController.CreateStock (backend-negosud) in 199.8008ms
2025-02-03 22:53:52.625 +01:00 [INF] Executed endpoint 'backend_negosud.Controllers.StocksController.CreateStock (backend-negosud)'
2025-02-03 22:53:52.626 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5141/api/Stocks - 400 null application/problem+json; charset=utf-8 281.7437ms
2025-02-03 22:54:03.982 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5141/api/Stocks - application/json 116
2025-02-03 22:54:03.984 +01:00 [INF] CORS policy execution successful.
2025-02-03 22:54:03.984 +01:00 [INF] Executing endpoint 'backend_negosud.Controllers.StocksController.CreateStock (backend-negosud)'
2025-02-03 22:54:03.984 +01:00 [INF] Route matched with {action = "CreateStock", controller = "Stocks"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend_negosud.DTOs.StockSummaryDto]] CreateStock(backend_negosud.DTOs.StockInputDto) on controller backend_negosud.Controllers.StocksController (backend-negosud).
2025-02-03 22:54:03.993 +01:00 [INF] Executing action method backend_negosud.Controllers.StocksController.CreateStock (backend-negosud) - Validation state: "Valid"
2025-02-03 22:54:04.123 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.article_id, a.famille_id, a.fournisseur_id, a.libelle, a.prix, a.reference, a.tva_id
FROM article AS a
WHERE a.article_id = @__p_0
LIMIT 1
2025-02-03 22:54:04.277 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO stock (article_id, quantite, reapprovisionnement_auto, ref_lot, seuil_minimum)
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING stock_id;
2025-02-03 22:54:04.279 +01:00 [INF] Executed action backend_negosud.Controllers.StocksController.CreateStock (backend-negosud) in 293.9542ms
2025-02-03 22:54:04.279 +01:00 [INF] Executed endpoint 'backend_negosud.Controllers.StocksController.CreateStock (backend-negosud)'
2025-02-03 22:54:04.296 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at backend_negosud.Controllers.StocksController.CreateStock(StockInputDto createStockDto) in /Users/yoann/Workspace/CESI DI 2023/Negosud/backend/backend-negosud/Controllers/StocksController.cs:line 75
   at lambda_method30(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-02-03 22:54:04.305 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5141/api/Stocks - 500 null text/plain; charset=utf-8 323.1705ms
2025-02-03 22:54:32.112 +01:00 [INF] Application is shutting down...
2025-02-03 22:54:35.577 +01:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM client AS c)
2025-02-03 22:54:35.685 +01:00 [INF] User profile is available. Using '/Users/yoann/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-02-03 22:54:35.713 +01:00 [INF] Now listening on: http://localhost:5141
2025-02-03 22:54:35.715 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-03 22:54:35.715 +01:00 [INF] Hosting environment: Development
2025-02-03 22:54:35.715 +01:00 [INF] Content root path: /Users/yoann/Workspace/CESI DI 2023/Negosud/backend/backend-negosud
2025-02-03 22:54:36.642 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5141/swagger/index.html - null null
2025-02-03 22:54:36.757 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5141/swagger/index.html - 200 null text/html;charset=utf-8 117.3967ms
2025-02-03 22:54:37.020 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5141/swagger/v1/swagger.json - null null
2025-02-03 22:54:37.106 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5141/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 87.1873ms
2025-02-03 22:54:50.759 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5141/api/Stocks - application/json 116
2025-02-03 22:54:50.783 +01:00 [WRN] Failed to determine the https port for redirect.
2025-02-03 22:54:50.810 +01:00 [INF] CORS policy execution successful.
2025-02-03 22:54:50.811 +01:00 [WRN] Failed to determine the https port for redirect.
2025-02-03 22:54:50.840 +01:00 [INF] Executing endpoint 'backend_negosud.Controllers.StocksController.CreateStock (backend-negosud)'
2025-02-03 22:54:50.855 +01:00 [INF] Route matched with {action = "CreateStock", controller = "Stocks"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend_negosud.DTOs.StockSummaryDto]] CreateStock(backend_negosud.DTOs.StockInputDto) on controller backend_negosud.Controllers.StocksController (backend-negosud).
2025-02-03 22:54:51.022 +01:00 [INF] Executing action method backend_negosud.Controllers.StocksController.CreateStock (backend-negosud) - Validation state: "Valid"
2025-02-03 22:54:51.128 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.article_id, a.famille_id, a.fournisseur_id, a.libelle, a.prix, a.reference, a.tva_id
FROM article AS a
WHERE a.article_id = @__p_0
LIMIT 1
2025-02-03 22:54:51.275 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO stock (article_id, quantite, reapprovisionnement_auto, ref_lot, seuil_minimum)
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING stock_id;
2025-02-03 22:54:51.282 +01:00 [INF] Executed action backend_negosud.Controllers.StocksController.CreateStock (backend-negosud) in 423.3787ms
2025-02-03 22:54:51.283 +01:00 [INF] Executed endpoint 'backend_negosud.Controllers.StocksController.CreateStock (backend-negosud)'
2025-02-03 22:54:51.298 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at backend_negosud.Controllers.StocksController.CreateStock(StockInputDto createStockDto) in /Users/yoann/Workspace/CESI DI 2023/Negosud/backend/backend-negosud/Controllers/StocksController.cs:line 75
   at lambda_method30(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-02-03 22:54:51.308 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5141/api/Stocks - 500 null text/plain; charset=utf-8 548.989ms
2025-02-03 22:55:48.361 +01:00 [INF] Application is shutting down...
2025-02-03 22:55:51.818 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM client AS c)
2025-02-03 22:55:51.926 +01:00 [INF] User profile is available. Using '/Users/yoann/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-02-03 22:55:51.954 +01:00 [INF] Now listening on: http://localhost:5141
2025-02-03 22:55:51.956 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-03 22:55:51.957 +01:00 [INF] Hosting environment: Development
2025-02-03 22:55:51.957 +01:00 [INF] Content root path: /Users/yoann/Workspace/CESI DI 2023/Negosud/backend/backend-negosud
2025-02-03 22:55:52.846 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5141/swagger/index.html - null null
2025-02-03 22:55:52.957 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5141/swagger/index.html - 200 null text/html;charset=utf-8 112.209ms
2025-02-03 22:55:53.250 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5141/swagger/v1/swagger.json - null null
2025-02-03 22:55:53.343 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5141/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 93.4354ms
2025-02-03 22:56:09.906 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5141/api/Stocks - application/json 117
2025-02-03 22:56:09.911 +01:00 [WRN] Failed to determine the https port for redirect.
2025-02-03 22:56:09.924 +01:00 [INF] CORS policy execution successful.
2025-02-03 22:56:09.924 +01:00 [WRN] Failed to determine the https port for redirect.
2025-02-03 22:56:09.952 +01:00 [INF] Executing endpoint 'backend_negosud.Controllers.StocksController.CreateStock (backend-negosud)'
2025-02-03 22:56:09.964 +01:00 [INF] Route matched with {action = "CreateStock", controller = "Stocks"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend_negosud.DTOs.StockSummaryDto]] CreateStock(backend_negosud.DTOs.StockInputDto) on controller backend_negosud.Controllers.StocksController (backend-negosud).
2025-02-03 22:56:10.128 +01:00 [INF] Executing action method backend_negosud.Controllers.StocksController.CreateStock (backend-negosud) - Validation state: "Valid"
2025-02-03 22:56:10.238 +01:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.article_id, a.famille_id, a.fournisseur_id, a.libelle, a.prix, a.reference, a.tva_id
FROM article AS a
WHERE a.article_id = @__p_0
LIMIT 1
2025-02-03 22:56:10.400 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO stock (article_id, quantite, reapprovisionnement_auto, ref_lot, seuil_minimum)
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING stock_id;
2025-02-03 22:56:10.410 +01:00 [INF] Executed action backend_negosud.Controllers.StocksController.CreateStock (backend-negosud) in 442.2789ms
2025-02-03 22:56:10.411 +01:00 [INF] Executed endpoint 'backend_negosud.Controllers.StocksController.CreateStock (backend-negosud)'
2025-02-03 22:56:10.427 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at backend_negosud.Controllers.StocksController.CreateStock(StockInputDto createStockDto) in /Users/yoann/Workspace/CESI DI 2023/Negosud/backend/backend-negosud/Controllers/StocksController.cs:line 75
   at lambda_method30(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-02-03 22:56:10.438 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5141/api/Stocks - 500 null text/plain; charset=utf-8 532.351ms
2025-02-03 22:57:22.391 +01:00 [INF] Application is shutting down...
2025-02-03 22:57:25.616 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM client AS c)
2025-02-03 22:57:25.720 +01:00 [INF] User profile is available. Using '/Users/yoann/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-02-03 22:57:25.747 +01:00 [INF] Now listening on: http://localhost:5141
2025-02-03 22:57:25.749 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-03 22:57:25.750 +01:00 [INF] Hosting environment: Development
2025-02-03 22:57:25.750 +01:00 [INF] Content root path: /Users/yoann/Workspace/CESI DI 2023/Negosud/backend/backend-negosud
2025-02-03 22:57:26.798 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5141/swagger/index.html - null null
2025-02-03 22:57:26.912 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5141/swagger/index.html - 200 null text/html;charset=utf-8 115.6543ms
2025-02-03 22:57:27.183 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5141/swagger/v1/swagger.json - null null
2025-02-03 22:57:27.275 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5141/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 91.6015ms
2025-02-03 22:57:54.249 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5141/api/Stocks - application/json 117
2025-02-03 22:57:54.267 +01:00 [WRN] Failed to determine the https port for redirect.
2025-02-03 22:57:54.279 +01:00 [INF] CORS policy execution successful.
2025-02-03 22:57:54.280 +01:00 [WRN] Failed to determine the https port for redirect.
2025-02-03 22:57:54.310 +01:00 [INF] Executing endpoint 'backend_negosud.Controllers.StocksController.CreateStock (backend-negosud)'
2025-02-03 22:57:54.325 +01:00 [INF] Route matched with {action = "CreateStock", controller = "Stocks"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[backend_negosud.DTOs.StockSummaryDto]] CreateStock(backend_negosud.DTOs.StockInputDto) on controller backend_negosud.Controllers.StocksController (backend-negosud).
2025-02-03 22:57:54.500 +01:00 [INF] Executing action method backend_negosud.Controllers.StocksController.CreateStock (backend-negosud) - Validation state: "Valid"
2025-02-03 22:57:54.607 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT a.article_id, a.famille_id, a.fournisseur_id, a.libelle, a.prix, a.reference, a.tva_id
FROM article AS a
WHERE a.article_id = @__p_0
LIMIT 1
2025-02-03 22:57:54.753 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?', @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO stock (article_id, quantite, reapprovisionnement_auto, ref_lot, seuil_minimum)
VALUES (@p0, @p1, @p2, @p3, @p4)
RETURNING stock_id;
2025-02-03 22:57:54.760 +01:00 [INF] Executed action backend_negosud.Controllers.StocksController.CreateStock (backend-negosud) in 431.629ms
2025-02-03 22:57:54.761 +01:00 [INF] Executed endpoint 'backend_negosud.Controllers.StocksController.CreateStock (backend-negosud)'
2025-02-03 22:57:54.777 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at backend_negosud.Controllers.StocksController.CreateStock(StockInputDto createStockDto) in /Users/yoann/Workspace/CESI DI 2023/Negosud/backend/backend-negosud/Controllers/StocksController.cs:line 75
   at lambda_method30(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-02-03 22:57:54.790 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5141/api/Stocks - 500 null text/plain; charset=utf-8 540.6594ms
