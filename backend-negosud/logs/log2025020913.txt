2025-02-09 13:01:13.283 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM client AS c)
2025-02-09 13:01:13.369 +01:00 [INF] Starting Hangfire Server using job storage: 'Hangfire.MemoryStorage.MemoryStorage'
2025-02-09 13:01:13.369 +01:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-02-09 13:01:13.409 +01:00 [INF] Server macbookpro:65199:65b0e44a successfully announced in 31,7122 ms
2025-02-09 13:01:13.411 +01:00 [INF] Server macbookpro:65199:65b0e44a is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-02-09 13:01:13.414 +01:00 [INF] Server macbookpro:65199:65b0e44a all the dispatchers started
2025-02-09 13:01:13.459 +01:00 [INF] User profile is available. Using '/Users/yoann/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-02-09 13:01:13.489 +01:00 [INF] Now listening on: http://localhost:5141
2025-02-09 13:01:13.490 +01:00 [INF] Starting Hangfire Server using job storage: 'Hangfire.MemoryStorage.MemoryStorage'
2025-02-09 13:01:13.490 +01:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-02-09 13:01:13.491 +01:00 [INF] Server macbookpro:65199:204bb394 successfully announced in 0,0802 ms
2025-02-09 13:01:13.491 +01:00 [INF] Server macbookpro:65199:204bb394 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-02-09 13:01:13.492 +01:00 [INF] Server macbookpro:65199:204bb394 all the dispatchers started
2025-02-09 13:01:13.493 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-09 13:01:13.493 +01:00 [INF] Hosting environment: Development
2025-02-09 13:01:13.493 +01:00 [INF] Content root path: /Users/yoann/Workspace/CESI DI 2023/Negosud/backend/backend-negosud
2025-02-09 13:01:14.453 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5141/swagger/index.html - null null
2025-02-09 13:01:14.549 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5141/swagger/index.html - 200 null text/html;charset=utf-8 96.0665ms
2025-02-09 13:01:14.818 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5141/swagger/v1/swagger.json - null null
2025-02-09 13:01:14.924 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5141/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 105.8562ms
2025-02-09 13:01:24.136 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5141/api/Panier/4 - null null
2025-02-09 13:01:24.169 +01:00 [WRN] Failed to determine the https port for redirect.
2025-02-09 13:01:24.206 +01:00 [INF] Executing endpoint 'backend_negosud.Controllers.PanierController.GetBasketClient (backend-negosud)'
2025-02-09 13:01:24.220 +01:00 [INF] Route matched with {action = "GetBasketClient", controller = "Panier"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBasketClient(Int32) on controller backend_negosud.Controllers.PanierController (backend-negosud).
2025-02-09 13:01:24.328 +01:00 [INF] Executing action method backend_negosud.Controllers.PanierController.GetBasketClient (backend-negosud) - Validation state: "Valid"
2025-02-09 13:01:24.498 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@__clientId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.commande_id, t.client_id, t.date_creation, t.date_expiration, t.facture_id, t.livraison_id, t.valide, t0.ligne_commande_id, t0.article_id, t0.commande_id, t0.quantite, t0.article_id0, t0.famille_id, t0.fournisseur_id, t0.libelle, t0.prix, t0.reference, t0.tva_id
FROM (
    SELECT c.commande_id, c.client_id, c.date_creation, c.date_expiration, c.facture_id, c.livraison_id, c.valide
    FROM commande AS c
    WHERE c.client_id = @__clientId_0 AND NOT (c.valide)
    ORDER BY c.date_creation DESC
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l.ligne_commande_id, l.article_id, l.commande_id, l.quantite, a.article_id AS article_id0, a.famille_id, a.fournisseur_id, a.libelle, a.prix, a.reference, a.tva_id
    FROM ligne_commande AS l
    INNER JOIN article AS a ON l.article_id = a.article_id
) AS t0 ON t.commande_id = t0.commande_id
ORDER BY t.date_creation DESC, t.commande_id, t0.ligne_commande_id
2025-02-09 13:01:24.504 +01:00 [WRN] Aucun panier actif trouvé pour le client avec l'ID: 4
2025-02-09 13:01:24.509 +01:00 [INF] Executed action method backend_negosud.Controllers.PanierController.GetBasketClient (backend-negosud), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 178.0999ms.
2025-02-09 13:01:24.517 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'backend_negosud.Models.ResponseDataModel`1[[backend_negosud.DTOs.Commande_client.Outputs.PanierOutputDto, backend-negosud, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-09 13:01:24.587 +01:00 [INF] Executed action backend_negosud.Controllers.PanierController.GetBasketClient (backend-negosud) in 363.7689ms
2025-02-09 13:01:24.588 +01:00 [INF] Executed endpoint 'backend_negosud.Controllers.PanierController.GetBasketClient (backend-negosud)'
2025-02-09 13:01:24.596 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5141/api/Panier/4 - 400 null application/json; charset=utf-8 460.5599ms
2025-02-09 13:01:50.037 +01:00 [INF] Request starting HTTP/1.1 POST http://localhost:5141/api/Panier/create - application/json 102
2025-02-09 13:01:50.046 +01:00 [INF] CORS policy execution successful.
2025-02-09 13:01:50.048 +01:00 [INF] Executing endpoint 'backend_negosud.Controllers.PanierController.CreateBasket (backend-negosud)'
2025-02-09 13:01:50.051 +01:00 [INF] Route matched with {action = "CreateBasket", controller = "Panier"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateBasket(backend_negosud.DTOs.Commande_client.PanierInputDto) on controller backend_negosud.Controllers.PanierController (backend-negosud).
2025-02-09 13:01:50.094 +01:00 [INF] Executing action method backend_negosud.Controllers.PanierController.CreateBasket (backend-negosud) - Validation state: "Valid"
2025-02-09 13:01:50.097 +01:00 [INF] Tentative de récupération du client avec ID: 12
2025-02-09 13:01:50.143 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.client_id, c.acess_token, c.email, c.est_valide, c.mot_de_passe, c.nom, c.prenom, c.tel
FROM client AS c
WHERE c.client_id = @__p_0
LIMIT 1
2025-02-09 13:01:50.199 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__ligne_ArticleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM article AS a
    WHERE a.article_id = @__ligne_ArticleId_0)
2025-02-09 13:01:50.349 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO commande (client_id, date_creation, date_expiration, facture_id, livraison_id, valide)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING commande_id;
2025-02-09 13:01:50.363 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO ligne_commande (article_id, commande_id, quantite)
VALUES (@p6, @p7, @p8)
RETURNING ligne_commande_id;
2025-02-09 13:01:50.388 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t.commande_id, t.client_id, t.date_creation, t.date_expiration, t.facture_id, t.livraison_id, t.valide, t0.ligne_commande_id, t0.article_id, t0.commande_id, t0.quantite, t0.article_id0, t0.famille_id, t0.fournisseur_id, t0.libelle, t0.prix, t0.reference, t0.tva_id
FROM (
    SELECT c.commande_id, c.client_id, c.date_creation, c.date_expiration, c.facture_id, c.livraison_id, c.valide
    FROM commande AS c
    WHERE c.commande_id = @__id_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l.ligne_commande_id, l.article_id, l.commande_id, l.quantite, a.article_id AS article_id0, a.famille_id, a.fournisseur_id, a.libelle, a.prix, a.reference, a.tva_id
    FROM ligne_commande AS l
    INNER JOIN article AS a ON l.article_id = a.article_id
) AS t0 ON t.commande_id = t0.commande_id
ORDER BY t.commande_id, t0.ligne_commande_id
2025-02-09 13:01:50.409 +01:00 [INF] Executed action method backend_negosud.Controllers.PanierController.CreateBasket (backend-negosud), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 315.3348ms.
2025-02-09 13:01:50.410 +01:00 [INF] Executing OkObjectResult, writing value of type 'backend_negosud.Models.ResponseDataModel`1[[backend_negosud.DTOs.Commande_client.Outputs.PanierOutputDto, backend-negosud, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-09 13:01:50.421 +01:00 [INF] Executed action backend_negosud.Controllers.PanierController.CreateBasket (backend-negosud) in 369.3351ms
2025-02-09 13:01:50.421 +01:00 [INF] Executed endpoint 'backend_negosud.Controllers.PanierController.CreateBasket (backend-negosud)'
2025-02-09 13:01:50.421 +01:00 [INF] Request finished HTTP/1.1 POST http://localhost:5141/api/Panier/create - 200 null application/json; charset=utf-8 384.4093ms
2025-02-09 13:03:24.030 +01:00 [INF] Server macbookpro:65199:204bb394 caught stopping signal...
2025-02-09 13:03:24.033 +01:00 [INF] Application is shutting down...
2025-02-09 13:03:24.033 +01:00 [INF] Server macbookpro:65199:65b0e44a caught stopping signal...
2025-02-09 13:03:24.036 +01:00 [INF] Server macbookpro:65199:204bb394 All dispatchers stopped
2025-02-09 13:03:24.036 +01:00 [INF] Server macbookpro:65199:65b0e44a All dispatchers stopped
2025-02-09 13:03:24.040 +01:00 [INF] Server macbookpro:65199:204bb394 successfully reported itself as stopped in 0,7835 ms
2025-02-09 13:03:24.040 +01:00 [INF] Server macbookpro:65199:65b0e44a successfully reported itself as stopped in 0,7493 ms
2025-02-09 13:03:24.040 +01:00 [INF] Server macbookpro:65199:204bb394 has been stopped in total 7,6675 ms
2025-02-09 13:03:24.040 +01:00 [INF] Server macbookpro:65199:65b0e44a has been stopped in total 7,1598 ms
2025-02-09 13:50:53.860 +01:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM client AS c)
2025-02-09 13:50:53.947 +01:00 [INF] Starting Hangfire Server using job storage: 'Hangfire.MemoryStorage.MemoryStorage'
2025-02-09 13:50:53.948 +01:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-02-09 13:50:53.988 +01:00 [INF] Server macbookpro:66509:ea31ffee successfully announced in 33,4846 ms
2025-02-09 13:50:53.990 +01:00 [INF] Server macbookpro:66509:ea31ffee is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-02-09 13:50:53.993 +01:00 [INF] Server macbookpro:66509:ea31ffee all the dispatchers started
2025-02-09 13:50:54.042 +01:00 [INF] User profile is available. Using '/Users/yoann/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-02-09 13:50:54.075 +01:00 [INF] Now listening on: http://localhost:5141
2025-02-09 13:50:54.076 +01:00 [INF] Starting Hangfire Server using job storage: 'Hangfire.MemoryStorage.MemoryStorage'
2025-02-09 13:50:54.076 +01:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2025-02-09 13:50:54.076 +01:00 [INF] Server macbookpro:66509:46767153 successfully announced in 0,0512 ms
2025-02-09 13:50:54.076 +01:00 [INF] Server macbookpro:66509:46767153 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, Worker, DelayedJobScheduler, RecurringJobScheduler...
2025-02-09 13:50:54.078 +01:00 [INF] Server macbookpro:66509:46767153 all the dispatchers started
2025-02-09 13:50:54.078 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2025-02-09 13:50:54.079 +01:00 [INF] Hosting environment: Development
2025-02-09 13:50:54.079 +01:00 [INF] Content root path: /Users/yoann/Workspace/CESI DI 2023/Negosud/backend/backend-negosud
2025-02-09 13:50:54.620 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5141/swagger/index.html - null null
2025-02-09 13:50:54.766 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5141/swagger/index.html - 200 null text/html;charset=utf-8 147.0432ms
2025-02-09 13:50:55.263 +01:00 [INF] Request starting HTTP/1.1 GET http://localhost:5141/swagger/v1/swagger.json - null null
2025-02-09 13:50:55.354 +01:00 [INF] Request finished HTTP/1.1 GET http://localhost:5141/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 87.3917ms
